#include "menon/encoding.hh"
#include <boost/core/lightweight_test.hpp>

int main()
{
  char const* s = "文字エンコーディングの変換テスト";
  char const* cp932_s = "\x95\xb6\x8e\x9a\x83\x47\x83\x93\x83\x52\x81\x5b\x83\x66\x83\x42\x83\x93\x83\x4f\x82\xcc\x95\xcf\x8a\xb7\x83\x65\x83\x58\x83\x67";
  char const* utf8_s = "\xe6\x96\x87\xe5\xad\x97\xe3\x82\xa8\xe3\x83\xb3\xe3\x82\xb3\xe3\x83\xbc\xe3\x83\x87\xe3\x82\xa3\xe3\x83\xb3\xe3\x82\xb0\xe3\x81\xae\xe5\xa4\x89\xe6\x8f\x9b\xe3\x83\x86\xe3\x82\xb9\xe3\x83\x88";
  char const* eucjp_s = "\xca\xb8\xbb\xfa\xa5\xa8\xa5\xf3\xa5\xb3\xa1\xbc\xa5\xc7\xa5\xa3\xa5\xf3\xa5\xb0\xa4\xce\xca\xd1\xb4\xb9\xa5\xc6\xa5\xb9\xa5\xc8";

  BOOST_TEST_CSTR_EQ(menon::mb_convert_encoding(s, "CP932").c_str(), cp932_s);
  BOOST_TEST_CSTR_EQ(menon::mb_convert_encoding(s, "UTF-8", "CP932").c_str(), utf8_s);
  BOOST_TEST_CSTR_EQ(menon::mb_convert_encoding(eucjp_s, "CP932", "EUC-JP").c_str(), cp932_s);
  return boost::report_errors();
}
